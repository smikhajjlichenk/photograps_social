!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=332)}({332:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e);var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,(n=[{key:"post",value:function(t,e){return new Promise((function(n,r){fetch(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return n(t)})).catch((function(t){return r(t)}))}))}},{key:"get",value:function(t,e){return new Promise((function(n,r){fetch(t,{method:"GET",headers:{"x-access-token":e}}).then((function(t){return t.json()})).then((function(t){return n(t)})).catch((function(t){return r(t)}))}))}}])&&r(e.prototype,n),a&&r(e,a),t}(),o="https://mlp-demo.herokuapp.com/api";function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"login",value:function(t,e){var n=new a;return new Promise((function(r,a){n.post("".concat(o,"/public/auth/login"),{email:t,password:e}).then((function(t){if(!t.auth)return a(t);localStorage.setItem("sn_user_id",t.id),localStorage.setItem("sn_user_token",t.token),r(t)})).catch((function(t){return a(t)}))}))}},{key:"logout",value:function(){return new Promise((function(t,e){localStorage.removeItem("sn_user_id"),localStorage.removeItem("sn_user_token"),localStorage.removeItem("sn_user_type"),t()}))}},{key:"signup",value:function(t){var e=new a;return new Promise((function(n,r){e.post("".concat(o,"/public/auth/signup"),t).then((function(t){n(t)})).catch((function(t){return r(t)}))}))}},{key:"token",get:function(){return localStorage.getItem("sn_user_token")}},{key:"userId",get:function(){return localStorage.getItem("sn_user_id")}},{key:"userIsAdmin",get:function(){return"admin"===localStorage.getItem("sn_user_type")}}])&&i(e.prototype,n),r&&i(e,r),t}();function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;location.appData=e,location.hash=t}}])&&c(e.prototype,n),r&&c(e,r),t}();function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._authService=new u,this._routing=new l}var e,n,r;return e=t,(n=[{key:"canActive",value:function(){return!!this._authService.token||(this._routing.navigate("/login"),!1)}}])&&s(e.prototype,n),r&&s(e,r),t}();function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._authService=new u,this._routing=new l}var e,n,r;return e=t,(n=[{key:"canActive",value:function(){return!!this._authService.userIsAdmin||(this._routing.navigate("/"),!1)}}])&&d(e.prototype,n),r&&d(e,r),t}();function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"render",value:function(){return'<div>\n\t\t\t\t\t<h1>Home page</h1>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<a href="/#/login">Go to Login</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<a href="/#/signup">Go to SignUp</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>'}}])&&m(e.prototype,n),r&&m(e,r),t}();function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"render",value:function(){return"<div>\n\t\t\t\t\t<h1>404</h1>\n\t\t\t\t\t<p>Page not found</p>\n\t\t\t\t</div>"}}])&&p(e.prototype,n),r&&p(e,r),t}();function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._modalContainer=document.querySelector("modals")}var e,n,r;return e=t,(n=[{key:"render",value:function(t){var e=this._getTemplate(t);this._modalContainer.innerHTML=e;var n=document.querySelector(".modal");this._showModal(n),this._hideModal(n)}},{key:"_showModal",value:function(t){setTimeout((function(){t.classList.add("show")}),100)}},{key:"_hideModal",value:function(t){var e=this;setTimeout((function(){t.classList.remove("show"),e._modalContainer.innerHTML=""}),3e3)}},{key:"_getTemplate",value:function(t){return'\n        \x3c!-- Modal --\x3e\n        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" style="display: block; background: rgba(33, 37, 41, 0.7)">\n          <div class="modal-dialog modal-dialog-centered" role="document">\n            <div class="modal-content">\n              <div class="modal-header">\n                <h5 class="modal-title" id="exampleModalLongTitle">Notification</h5>\n              </div>\n              <div class="modal-body">\n                '.concat(t,"\n              </div>\n            </div>\n          </div>\n        </div>\n        ")}}])&&w(e.prototype,n),r&&w(e,r),t}(),g=/^\S+@[a-z]+\.[a-z]+$/,_=/\S+/,k=/\S+[A-Za-z]/,x=/^\(\d{3}\)\d{3}-\d{2}-\d{2}$/,S=/[female, male]/gi,P=/^(0[1-9]|1\d|2\d|3[01])\.(0[1-9]|1[0-2])\.(19|20)\d{2}$/;function E(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var j=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._authService=new u,this._modal=new b,this._routing=new l}var e,n,r,a,o;return e=t,(n=[{key:"beforeRender",value:(a=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._authService.token&&this._routing.navigate("/users/".concat(this._authService.userId));case 1:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=a.apply(t,e);function i(t){E(o,n,r,i,u,"next",t)}function u(t){E(o,n,r,i,u,"throw",t)}i(void 0)}))},function(){return o.apply(this,arguments)})},{key:"render",value:function(){return'\n        <div class="auth-wrap d-flex mt-5">\n            <div class="auth-form col col-6 mx-auto my-auto">\n                <h3>Login to Social.</h3>\n                <p class="text-secondary">Enter your e-mail address & password to login to your Social account.</p>\n                <form name="loginForm" novalidate>\n                    <div class="form-group">\n                        <input type="email" class="form-control form-control-sm" id="email" placeholder="name@example.com" required data-pattern="^S+@[a-z]+.[a-z]+$" title="Введите email, в формате name@example.com">\n                        <input type="password" class="form-control form-control-sm mt-3" id="password" placeholder="password" required data-pattern="S+" title="Введите password, не менее 6 символов">\n                        <div class="d-flex mt-5">\n                            <button type="submit" class="btn btn-primary btn-sm">Login</button>\n                        </div>\n                        <a href="#/">Go to Home page</a>\n                    </div>\n                </form>\n            </div>\n            \x3c!-- /.auth-form --\x3e\n            <div class="auth-bg col col-6">\n\n            </div>\n            \x3c!-- /.auth-bg --\x3e\n        </div>\n        \x3c!-- /.auth-wrap --\x3e\n        '}},{key:"afterRender",value:function(){var t=this;document.forms.loginForm.addEventListener("submit",(function(e){e.preventDefault();var n=e.target.elements,r=n.email,a=n.password;return g.test(r.value)?_.test(a.value)?r.value&&a.value?void t._authService.login(r.value,a.value).then((function(e){t._routing.navigate("/users/".concat(e.id),{myData:"My data"})})).catch((function(e){return t._modal.render(e.message)})):console.warn("Заполните все поля"):console.warn("Укажите верный password"):console.warn("Укажите верный email")}))}}])&&T(e.prototype,n),r&&T(e,r),t}();function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._authService=new u,this._modal=new b}var e,n,r;return e=t,(n=[{key:"render",value:function(){return'\n        <div class="auth-wrap d-flex mt-5">\n            <div class="auth-form col col-6 mx-auto my-auto">\n                <h3>SignUp to Social.</h3>\n                <p class="text-secondary">Enter your details for registration.</p>\n                <form name="signupForm" novalidate>\n                    <div class="form-group">\n                        <input type="email" class="form-control form-control-sm" id="email" placeholder="name@example.com" required data-pattern="^S+@[a-z]+.[a-z]+$" title="Enter your email, in the format name@example.com">\n                        <input type="password" class="form-control form-control-sm mt-3" id="password" placeholder="password" required data-pattern="S+" title="Enter your password, at least 8 characters">\n                        <input type="text" class="form-control form-control-sm mt-3" id="nickname" placeholder="nickname" required data-pattern="S+" title="Enter your nickname, at least 8 characters">\n                        <input type="text" class="form-control form-control-sm mt-3" id="first_name" placeholder="first_name" required data-pattern="S+[A-Za-z]" title="Enter your name">\n                        <input type="text" class="form-control form-control-sm mt-3" id="last_name" placeholder="last_name" required data-pattern="S+[A-Za-z]" title="Enter your last name">\n                        <input type="tel" class="form-control form-control-sm mt-3" id="phone" placeholder="phone" required data-pattern="^(d{3})d{3}-d{2}-d{2}$" title="Enter your phone number in the format (XXX)XXX-XX-XX">\n                        <input type="text" class="form-control form-control-sm mt-3" id="gender_orientation" placeholder="gender_orientation" required data-pattern="[female, male]" title="Enter your gender (female / male)">\n                        <input type="text" class="form-control form-control-sm mt-3" id="city" placeholder="city" required data-pattern="S+[A-Za-z]" title="Enter the name of the city where you live">\n                        <input type="text" class="form-control form-control-sm mt-3" id="country" placeholder="country" required data-pattern="S+[A-Za-z]" title="Enter the name of the country where you live">\n                        <input type="text" class="form-control form-control-sm mt-3" id="date_of_birth" placeholder="date_of_birth" required data-pattern="^(0[1-9]|1d|2d|3[01]).(0[1-9]|1[0-2]).(19|20)d{2}$" title="Enter your date of birth in the format dd.mm.yyyy">\n                        <div class="d-flex mt-5">\n                            <button type="submit" class="btn btn-primary btn-sm">SignUp</button>\n                        </div>\n                        <a href="#/">Go to Home page</a>\n                    </div>\n                </form>\n            </div>\n            \x3c!-- /.auth-form --\x3e\n            <div class="auth-bg col col-6">\n\n            </div>\n            \x3c!-- /.auth-bg --\x3e\n        </div>\n        \x3c!-- /.auth-wrap --\x3e\n        '}},{key:"afterRender",value:function(){var t=this;document.forms.signupForm.addEventListener("submit",(function(e){e.preventDefault();var n=e.target.elements,r=n.email,a=n.password,o=n.nickname,i=n.first_name,u=n.last_name,c=n.phone,l=n.gender_orientation,s=n.city,f=n.country,d=n.date_of_birth;if(!g.test(r.value))return console.warn("Укажите верный email");if(!_.test(a.value))return console.warn("Укажите верный password");if(!_.test(o.value))return console.warn("Укажите верный nickname");if(!k.test(i.value))return console.warn("Укажите верный first_name");if(!k.test(u.value))return console.warn("Укажите верный last_name");if(!x.test(c.value))return console.warn("Укажите верный phone");if(!S.test(l.value))return console.warn("Укажите верный gender_orientation");if(!k.test(s.value))return console.warn("Укажите верный city");if(!k.test(f.value))return console.warn("Укажите верный country");if(!P.test(d.value))return console.warn("Укажите верный date_of_birth");if(!(r.value&&a.value&&o.value&&i.value&&u.value&&c.value&&l.value&&s.value&&f.value&&d.value))return console.warn("Заполните все поля");var v=R(d.value.split("."),3),m=v[0],h=v[1],p=v[2],y={email:r.value,password:a.value,nickname:o.value,first_name:i.value,last_name:u.value,phone:c.value,gender_orientation:l.value,city:s.value,country:f.value,date_of_birth_day:m,date_of_birth_month:h,date_of_birth_year:p};t._authService.signup(y).then((function(t){return console.log(t)})).catch((function(e){return t._modal.render(e.message)}))}))}}])&&C(e.prototype,n),r&&C(e,r),t}();function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var q=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"parseRequestURL",value:function(){var t=location.hash.slice(1).toLowerCase()||"/",e=t.split("/");return{resource:e[1],id:e[2],url:t}}}])&&I(e.prototype,n),r&&I(e,r),t}();function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var M=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"getUser",value:function(t){var e=new a;return new Promise((function(n,r){e.get("".concat(o,"/public/users/get-info/").concat(t)).then((function(t){return n(t)})).catch((function(t){return r(t)}))}))}}])&&L(e.prototype,n),r&&L(e,r),t}();function A(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var U=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._activeRoute=new q,this._authService=new u,this._userService=new M,this._authUserId=this._authService.userId,this._user=null}var e,n,r,a,o;return e=t,(n=[{key:"beforeRender",value:(a=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._activeUserId=this._activeRoute.parseRequestURL().id,t.next=3,this._userService.getUser(this._activeUserId);case 3:this._user=t.sent,localStorage.setItem("sn_user_type",this._user.type);case 5:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=a.apply(t,e);function i(t){A(o,n,r,i,u,"next",t)}function u(t){A(o,n,r,i,u,"throw",t)}i(void 0)}))},function(){return o.apply(this,arguments)})},{key:"render",value:function(){return"\n            \x3c!-- Component styles --\x3e\n            <style>\n                ".concat(this.style,'\n            </style>\n            \x3c!-- Component html --\x3e\n            <div class="user-cover-container"\n                style="background: url(').concat(this._user.cover,') no-repeat center / cover;"\n            >\n            </div>\n            <div class="user-avatar-container d-flex justify-content-center">\n                <div class="user-avatar">\n                    <img src="').concat(this._user.avatar,'">\n                </div>\n            </div>\n        ')}},{key:"style",get:function(){return"\n            img {\n                max-width: 100%;\n            }\n            .user-cover-container {\n                height: 400px;\n                width: 100%;\n            }\n            .user-avatar-container {\n                transform: translateY(-50%);\n                position: relative;\n                width: 138px;\n                margin: 0 auto;\n            }\n            .user-avatar {\n                width: 138px;\n                height: 138px;\n                border-radius: 50%;\n                overflow: hidden;\n            }\n        "}}])&&z(e.prototype,n),r&&z(e,r),t}();function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var H=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"getNews",value:function(t){var e=new a;return new Promise((function(n,r){e.get("".concat(o,"/public/news"),t).then((function(t){return n(t)})).catch((function(t){return r(t)}))}))}}])&&X(e.prototype,n),r&&X(e,r),t}();function $(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var G=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._authService=new u,this._newsService=new H,this._authToken=this._authService.token}var e,n,r,a,o;return e=t,(n=[{key:"beforeRender",value:(a=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._newsService.getNews(this._authToken);case 2:this._token=t.sent,console.log(this._token);case 4:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=a.apply(t,e);function i(t){$(o,n,r,i,u,"next",t)}function u(t){$(o,n,r,i,u,"throw",t)}i(void 0)}))},function(){return o.apply(this,arguments)})},{key:"render",value:function(){return"\n\t\t\x3c!-- Component styles --\x3e\n\t\t<style>\n\t\t".concat(this.style,'\n\t\t</style>\n\t\t\x3c!-- Component html --\x3e\n\t\t<div class="iner_news">\n\t\t<div class="news">\n\t\t<div class="img">\n\t\t<img src="').concat(this._token.news[0].owner.avatar,'">\n\t\t</div>\n\t\t<div class="info">\n\t\t<div class="name">Name: ').concat(this._token.news[0].owner.full_name,'</div>\n\t\t<div class="country">Country: ').concat(this._token.news[0].owner.country,"</div>\n\t\t</div>\n\t\t</div>\n\t\t\n\t\t</div>\n\t\t")}},{key:"style",get:function(){return"\n\t\t.news {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tposition: absolute;\n\t\t\ttop: 50%;\n\t\t\tleft: 50%;\n\t\t\ttransform: translate(-50%, -50%);\n\t\t}\n\n\t\t.img {\n\t\t\tpadding-right: 5px;\n\t\t}\n\n\t\t.info {\n\t\t\tpadding-bottom: 10px;\n\t\t\tpadding-left: 5px;\n\t\t}\n\n\t\t"}}])&&N(e.prototype,n),r&&N(e,r),t}();function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"getWinners",value:function(t,e){var n=new a;return new Promise((function(r,a){n.get("".concat(o,"/public/winners?part=").concat(t,"&limit=").concat(e)).then((function(t){if(!t.winners)return a(t);r(t)})).catch((function(t){return a(t)}))}))}}])&&Z(e.prototype,n),r&&Z(e,r),t}();function F(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var J=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._winnersService=new D}var e,n,r,a,o;return e=t,(n=[{key:"beforeRender",value:(a=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._winnersService.getWinners(1,15);case 2:this._partlimit=t.sent;case 3:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=a.apply(t,e);function i(t){F(o,n,r,i,u,"next",t)}function u(t){F(o,n,r,i,u,"throw",t)}i(void 0)}))},function(){return o.apply(this,arguments)})},{key:"render",value:function(){return"\n\t\t\x3c!-- Component styles --\x3e\n\t\t<style>\n\t\t".concat(this.style,'\n\t\t</style>\n\t\t\x3c!-- Component html --\x3e\n\t\t<div class="winners">\n\t\t\t<ol>\n\t\t\t\t<li>\n\t\t\t\t\t').concat(this._partlimit.winners[0].submited_time,"\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t").concat(this._partlimit.winners[1].submited_time,"\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t").concat(this._partlimit.winners[2].submited_time,"\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t").concat(this._partlimit.winners[3].submited_time,"\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t").concat(this._partlimit.winners[4].submited_time,"\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t").concat(this._partlimit.winners[5].submited_time,"\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t").concat(this._partlimit.winners[6].submited_time,"\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t").concat(this._partlimit.winners[7].submited_time,"\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t").concat(this._partlimit.winners[8].submited_time,"\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t").concat(this._partlimit.winners[9].submited_time,"\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t").concat(this._partlimit.winners[10].submited_time,"\n\t\t\t\t</li>\t\t\t\t\t\t\t\t\n\t\t\t</ol>\n\t\t\n\t\t</div>\n\t\t")}},{key:"style",get:function(){return"\n\t\t\tol {\n\t\t\t\tmargin-left: 50%;\n   \t\t\t\t transform: translateX(-20%);\n\t\t\t}\n\t\t\tli {\n\t\t\t\tmargin-top: 10px;\n\t\t\t}\n\t\t"}}])&&W(e.prototype,n),r&&W(e,r),t}();function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var B=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"render",value:function(){return"<h1>Admin Profile Page</h1>"}}])&&Y(e.prototype,n),r&&Y(e,r),t}(),K=new f,Q=new v,V={"/":{component:new h},"/login":{component:new j},"/users/:id":{component:new U,guards:[K]},"/news":{component:new G,guards:[K]},"/signup":{component:new O},"/winners":{component:new J},"/admin-panel":{component:new B,guards:[K,Q]},404:{component:new y}};function tt(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var nt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._authService=new u,this._routing=new l,this._userId=null}var e,n,r,a,o;return e=t,(n=[{key:"beforeRender",value:(a=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._userId=this._authService.userId;case 1:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=a.apply(t,e);function i(t){tt(o,n,r,i,u,"next",t)}function u(t){tt(o,n,r,i,u,"throw",t)}i(void 0)}))},function(){return o.apply(this,arguments)})},{key:"render",value:function(){if(!this._authService.token)return"";var t=this._authService.userIsAdmin;return'\n            <nav class="navbar navbar-light bg-light">\n                <a class="navbar-brand">App</a>\n                <ul class="navbar-nav d-flex flex-row">\n                    <li class="nav-item">\n                        <a class="nav-link" href="/#/">Home</a>\n                    </li>    \n                    <li class="nav-item ml-3" >\n                        <a class="nav-link" href="/#/users/'.concat(this._userId,'">My profile</a>\n                    </li>\n                    <li class="nav-item ml-3">\n                        <a class="nav-link" href="/#/news">News</a>\n                    </li>\n                    <li class="nav-item ml-3">\n                        <a class="nav-link" href="/#/winners">Winners</a>\n                    </li>\n                    ').concat(t?'<li class="nav-item ml-3">\n                        \t<a class="nav-link" href="/#/admin-panel">\n                        \t\tAdmin Panel\n                        \t</a>\n                    \t</li> ':"",'\n                </ul>\n                <button class="btn btn-primary logout-btn">Logout</button>\n            </nav>\n        ')}},{key:"afterRender",value:function(){var t=this;if(!this._authService.token)return"";document.querySelector(".logout-btn").addEventListener("click",(function(e){t._authService.logout().then((function(){return t._routing.navigate("/login")}))}))}}])&&et(e.prototype,n),r&&et(e,r),t}();function rt(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}var at=new q,ot=function(){var t,e=(t=regeneratorRuntime.mark((function t(){var e,n,r,a,o,i,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=document.querySelector("app-header"),n=document.querySelector("app-container"),r=at.parseRequestURL(),a=(r.resource?"/".concat(r.resource):"/")+(r.id?"/:id":""),o=V[a]?V[a].component:V[404].component,!(i=V[a]?V[a].guards:null)){t.next=10;break}if(i.every((function(t){return t.canActive()}))){t.next=10;break}return t.abrupt("return");case 10:if(!e){t.next=16;break}return u=new nt,t.next=14,u.beforeRender();case 14:e.innerHTML=u.render(),u.afterRender();case 16:if(!o.beforeRender){t.next=19;break}return t.next=19,o.beforeRender();case 19:n.innerHTML=o.render(),o.afterRender&&o.afterRender();case 21:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){rt(o,r,a,i,u,"next",t)}function u(t){rt(o,r,a,i,u,"throw",t)}i(void 0)}))});return function(){return e.apply(this,arguments)}}();window.addEventListener("load",ot),window.addEventListener("hashchange",ot)}});